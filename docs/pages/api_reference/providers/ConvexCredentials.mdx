# providers/ConvexCredentials

Configure [ConvexCredentials](ConvexCredentials.mdx#convexcredentials) provider given a [ConvexCredentialsConfig](ConvexCredentials.mdx#convexcredentialsconfigdatamodel).

This is for a very custom authentication implementation, often you can
use the [`Password`](./Password) provider instead.

```ts
import ConvexCredentials from "@xixixao/convex-auth/providers/ConvexCredentials";
import { convexAuth } from "@xixixao/convex-auth/server";

export const { auth, signIn, verifyCode, signOut, store } = convexAuth({
  providers: [
    ConvexCredentials({
      authorize: async (credentials, ctx) => {
        // Your custom logic here...
      },
    }),
  ],
});
```

## ConvexCredentialsConfig\<DataModel\>

The available options to a [ConvexCredentials](ConvexCredentials.mdx#convexcredentials) provider for Convex Auth.

<h3 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-2xl">Properties</h3>

#### id?

> `optional` **id**: `string`

Uniquely identifies the provider, allowing to use
multiple different [ConvexCredentials](ConvexCredentials.mdx#convexcredentials) providers.

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Source</h5>

[src/providers/ConvexCredentials.ts:40](https://github.com/get-convex/convex-auth/blob/main/src/providers/ConvexCredentials.ts#L40)

#### authorize()


Gives full control over how you handle the credentials received from the user.

This method expects a user ID to be returned for a successful login.

If an error is thrown or `null` is returned, the sign-in will fail.

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Parameters</h5>

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `credentials` | `Partial`\<`Record`\<`string`, `unknown`\>\> | <p>The available keys are determined by your call to `signIn()` on the client.</p><p>You can add basic validation depending on your use case, or you can use a popular library like [Zod](https://zod.dev) for validating the input.</p> |
| `ctx` | [`GenericActionCtxWithAuthConfig`](../server.mdx#genericactionctxwithauthconfigdatamodel)\<`DataModel`\> | - |

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Returns</h5>

`Promise`\<`null` \| `object`\>

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Source</h5>

[src/providers/ConvexCredentials.ts:48](https://github.com/get-convex/convex-auth/blob/main/src/providers/ConvexCredentials.ts#L48)

#### crypto?


Provide hashing and verification functions if you're
storing account secrets and want to control
how they're hashed.

These functions will be called during
the `createAccountWithCredentials` and `retrieveAccountWithCredentials`
execution.

##### hashSecret()


Function used to hash the secret.

<h6 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Parameters</h6>

| Parameter | Type |
| :------ | :------ |
| `secret` | `string` |

<h6 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Returns</h6>

`Promise`\<`string`\>

##### verifySecret()


Function used to verify that the secret
matches the stored hash.

<h6 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Parameters</h6>

| Parameter | Type |
| :------ | :------ |
| `secret` | `string` |
| `hash` | `string` |

<h6 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Returns</h6>

`Promise`\<`boolean`\>

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Source</h5>

[src/providers/ConvexCredentials.ts:68](https://github.com/get-convex/convex-auth/blob/main/src/providers/ConvexCredentials.ts#L68)

#### afterCodeVerification()?


Called after successful sign-in code verification.

Useful for implementing account modification flows that require
sign-in verification (such as password reset via email with OTP).

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Parameters</h5>

| Parameter | Type | Description |
| :------ | :------ | :------ |
| `credentials` | `Partial`\<`Record`\<`string`, `unknown`\>\> | <p>The available keys are determined by your call to `verifyCode()` on the client.</p><p>You can add basic validation depending on your use case, or you can use a popular library like [Zod](https://zod.dev) for validating the input.</p> |
| `verified` | `object` | - |
| `verified.userId` | `Id`\<`"users"`\> | - |
| `verified.providerAccountId` | `string` | - |
| `verified.sessionId` | `Id`\<`"sessions"`\> | - |
| `ctx` | [`GenericActionCtxWithAuthConfig`](../server.mdx#genericactionctxwithauthconfigdatamodel)\<`DataModel`\> | - |

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Returns</h5>

`Promise`\<`void`\>

<h5 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-lg">Source</h5>

[src/providers/ConvexCredentials.ts:86](https://github.com/get-convex/convex-auth/blob/main/src/providers/ConvexCredentials.ts#L86)

***

## ConvexCredentials()


The Credentials provider allows you to handle signing in with arbitrary credentials,
such as a username and password, domain, or two factor authentication or hardware device (e.g. YubiKey U2F / FIDO).

<h3 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-2xl">Parameters</h3>

| Parameter | Type |
| :------ | :------ |
| `config` | [`ConvexCredentialsConfig`](ConvexCredentials.mdx#convexcredentialsconfigdatamodel)\<`DataModel`\> |

<h3 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-2xl">Returns</h3>

`CredentialsConfig`

<h3 class="nx-font-semibold nx-tracking-tight nx-text-slate-900 dark:nx-text-slate-100 nx-mt-8 nx-text-2xl">Source</h3>

[src/providers/ConvexCredentials.ts:108](https://github.com/get-convex/convex-auth/blob/main/src/providers/ConvexCredentials.ts#L108)
